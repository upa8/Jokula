<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta 
        name="viewport" 
        content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
       
        <title>Jokula</title>
    </head>
    <body onLoad="init();">  
            <div>
                <center>
                <img src="img/logo_25.jpg" style="width:200px;height:200px;"  >
                  <h1>Welcome to Jokula !</h1>
                  <p>Your true source of fun and entertainment <br> <br>
                <button  onClick="init();">Click here start the fun journey</button> 
                </center>
            </div>
            
            
            <br>
     
    <script type="text/javascript" src="cordova.js"></script> 
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.3.js"></script>

    <script type="text/javascript">
            function init(){

                    alert("Please wait. Loading data...");
                        window.plugins.pushNotification.register(
                        successHandler,
                        errorHandler,
                        {"senderID":"639540991935",
                         "ecb":"onNotificationGCM"
                        }); 
                    }
                    function successHandler(result){
                    }
                    function errorHandler(error){
                    }
                    function onNotificationGCM(e){
                   // alert("Message : " + e.event );
                    switch(e.event){
                        alert("Please wait. Loading data...");
                        case 'registered':
                     //       alert("Activated");
                            sendRequest(e.regid);
                            break;
                        case 'message': 
                      //     alert("Restart this app ");
                     //       var sound = new Media("assets/www/"+e.soundname);
                      //      sound.play();   
                            break;
                        default:
                   //         alert("unknown event");
                    }

                    }
                    //use to send registration ID returned by GCM to our local php server
                    //regID should be save in our local database so that we can use regID and api-key from google to sent request to GCM
                    //from php server in mycase.
                    function sendRequest(regID){

                    $.post("http://testing.cupidic.com/register.php",
                        {
                        regId:regID,
                        name:"Jokula",
                        email:"XYZ"
                        });
                        alert(" Please restart app to enjoy the fun journey...");
                        
                    }
    </script>



<!-- 

        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.3.js"></script>

        <script type="text/javascript">
                       



function init(){
            alert("Activating your mobile for notifications .");
            window.plugins.pushNotification.register(
            successHandler,
            errorHandler,
            {"senderID":"639540991935",
             "ecb":"onNotificationGCM"
            }); 
        }
        function successHandler(result){
        }
        function errorHandler(error){
        }
        function onNotificationGCM(e){
       // alert("Message : " + e.event );
        switch(e.event){
            case 'registered':
                alert("Activated");
                sendRequest(e.regid);
                break;
            case 'message': 
               alert("Restart this app ");
         //       var sound = new Media("assets/www/"+e.soundname);
          //      sound.play();   
                break;
            default:
       //         alert("unknown event");
        }

        }
        //use to send registration ID returned by GCM to our local php server
        //regID should be save in our local database so that we can use regID and api-key from google to sent request to GCM
        //from php server in mycase.
        function sendRequest(regID){
        alert("sending request ..");

        $.post("http://testing.cupidic.com/register.php",
            {
            regId:regID,
            name:"Jokula",
            email:"XYZ"
            });
            alert("Restart this app ");
            
            
        }
        </script>
        -->
    </body>
</html>
